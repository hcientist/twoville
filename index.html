<!DOCTYPE html>
<html>
<head>
  <title>...</title>
  <script src="token.js"></script>
  <script src="lexer.js"></script>
  <script src="ast.js"></script>
  <script src="builtins.js"></script>
  <script src="parser.js"></script>
</head>
<body>

<input type="text" size="20" id="e" value="rectangle(0, 10, 200, 300)">
<input type="button" id="eval" value="Evaluate">
<input type="text" size="20" id="integer" readonly>
<input type="text" size="20" id="real" readonly>

<br>

<svg id="canvas" xmlns="http://www.w3.org/2000/svg" width="800" height="600"></svg>

<script>
var eBox = document.getElementById('e');
var evalButton = document.getElementById('eval');
var svg = document.getElementById('canvas');

evalButton.onclick = function() {
  while (svg.lastChild) {
    svg.removeChild(svg.lastChild);
  }

  tokens = lex(eBox.value);
  ast = parse(tokens);
  var env = {
    svg: svg,
    variables: {},
    functions: {}
  };

  env.functions['rectangle'] = {
    name: 'rectangle',
    formals: ['left', 'bottom', 'width', 'height'],
    body: new ExpressionRectangle()
  };

  result = ast.evaluate(env);
  //document.getElementById('integer').value = result.integer();
  //document.getElementById('real').value = result.real();
}

</script>
  
</body>
</html>
